!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";window.init=function(){var t="https://the-tasty-samosa.appspot.com/_ah/api";gapi.client.load("samosa","v1",function(){var t=n(1),e=n(4),i=n(3),r=t.createClass({displayName:"Router",getInitialState:function(){return{component:"<div />"}},componentDidMount:function(){var n=this;this.props.routes.forEach(function(i){var r=i[0],a=i[1];e(r,function(e){n.setState({component:t.createElement(a,{params:e.params})})})}),e.start()},render:function(){return t.createElement("div",null," ",this.state.component," ")}}),a=[["/embed/:key",i]];t.render(t.createElement(r,{routes:a}),document.getElementById("right-side-bar"))},t)}},function(t,e,n){t.exports=React},function(t,e,n){var i=n(1);CircularProgressBarGraphic=i.createClass({displayName:"CircularProgressBarGraphic",componentDidMount:function(){var t=this.getDOMNode().getContext("2d");t.width=this.props.width,t.height=this.props.height,t.translate(t.width/2,t.height/2),t.rotate(-1*Math.PI/2),this.paint(t)},componentDidUpdate:function(){var t=this.getDOMNode(),e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),this.paint(e)},paint:function(t){var e=(this.props.width-this.props.lineWidth)/2;t.beginPath(),t.arc(0,0,e,0,2*Math.PI*this.props.percent,!1),t.strokeStyle="#ff0000",t.lineCap="round",t.lineWidth=this.props.lineWidth,t.stroke()},render:function(){return i.createElement("canvas",{width:this.props.width,height:this.props.height,style:this.props.style})}});var r=i.createClass({displayName:"CircularProgressBar",render:function(){return this.props.percent?i.createElement(CircularProgressBarGraphic,{width:this.props.width,height:this.props.height,style:this.props.style,percent:this.props.percent,lineWidth:this.props.lineWidth}):i.createElement("div",{style:this.props.style})}}),a={STOPPED:0,LOADING:1,PLAYING:2,PAUSED:3,ENDED:4},o=function(){function t(){var t=new Audio;return t}var e;return{getInstance:function(n){return e||(e=t()),e},loadInstance:function(t){return e&&(e.src=t),null!=e.src&&e.ontimeupdate&&e.ontimeupdate(),e}}}();Sound=o.getInstance();var s=i.createClass({displayName:"AudioPlayer",getInitialState:function(){return{audioSrc:null,currentState:a.STOPPED,currentTime:0,duration:0}},onClick:function(){this.state.currentState==a.STOPPED||this.state.currentState==a.ENDED?(Parse.Analytics.track("Listens",{device:"Iframe"}),console.log("onClick called.."),Sound=o.getInstance(),console.log("Got a sound instance"),Sound.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")?(console.log("can play opus..!"),Sound=o.loadInstance(this.props.opusURL)):Sound.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(console.log("can play mp3..!"),Sound=o.loadInstance(this.props.mp3URL)),console.log("Calling sound.play"),Sound.play(),console.log("Playing sound.."),this.state.audioSrc=Sound.src,Sound.onended=this.onEnded,Sound.ontimeupdate=this.onTimeUpdate,this.setState({currentState:a.LOADING})):this.state.currentState==a.PLAYING&&(Sound.load(),this.setState({currentState:a.STOPPED,currentTime:0}))},onTimeUpdate:function(t){this.isMounted()&&(this.state.audioSrc==Sound.src||this.state.audioSrc==Sound.src?this.setState({duration:Sound.duration,currentState:a.PLAYING,currentTime:Sound.currentTime}):this.setState({currentState:a.STOPPED,currentTime:0}))},onEnded:function(){this.setState({currentState:a.ENDED,currentTime:0})},componentDidMount:function(){this.props.autoPlay&&this.onClick()},handleDownloadIconClick:function(t){Parse.Analytics.track("DownloadIconClick",{device:"Iframe",download_redirect:t})},render:function(){var t=i.createElement("img",{style:{margin:"7px"},width:"35px",src:"/static/images/play.png"});this.state.currentState==a.LOADING?(console.log("Loading.."),t=i.createElement("img",{style:{margin:"7px"},width:"35px",src:"/static/images/spinner.gif"})):this.state.currentState==a.PLAYING&&(t=i.createElement("img",{style:{margin:"7px"},width:"35px",src:"/static/images/pause.png"}));var e={position:"absolute",left:"50%",top:"50%",width:"50px",height:"50px",marginLeft:"-25px",borderRadius:"5px",marginTop:"-24px",background:"rgba(0, 0, 0, 0.7)",cursor:"pointer"},n={position:"absolute",top:"6px",left:"7px"},o=(this.props.frameWidth/6,{display:"none",width:"100%",position:"absolute",background:"rgba(0, 0, 0, 0.7)",bottom:"0px"}),s={width:"20%",marginLeft:"5%"};return this.state.currentState==a.ENDED&&(o.display="block"),i.createElement("div",null,i.createElement("div",{style:e,onClick:this.onClick},t,i.createElement(r,{style:n,width:37,height:37,lineWidth:4,percent:Math.min(Math.max(0,this.state.currentTime/this.state.duration||0),1)})),i.createElement("div",{style:o},i.createElement("div",{style:{color:"white",fontSize:this.props.fontSize}}," To share this clip on Whatsapp"),i.createElement("a",{onClick:this.handleDownloadIconClick.bind(this,"android"),target:"_blank",href:"https://bit.ly/samosa-android"},i.createElement("img",{style:s,src:"https://www.gstatic.com/android/market_images/web/play_logo_x2.png"})),i.createElement("a",{onClick:this.handleDownloadIconClick.bind(this,"apple"),target:"_blank",href:"https://bit.ly/samosa-ios"},i.createElement("img",{style:s,src:"http://www.yallatruck.com/wp-content/uploads/2014/08/apple-app-store-icon.jpg"})),i.createElement("a",{onClick:this.handleDownloadIconClick.bind(this,"windows"),target:"_top",href:"https://www.microsoft.com/en-us/store/apps/samosa-chat/9nblggh0lcd0"},i.createElement("img",{style:s,src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ7Tg4qXdHWu0tIEOYMjXe-coWZ2IooFRz5-OzKrfMcioSqmVj68Q"})),i.createElement("a",{onClick:this.handleDownloadIconClick.bind(this,"chrome-plugin"),target:"_blank",href:"https://bit.ly/samosa-chrome"},i.createElement("img",{style:s,src:"https://www.mailvelope.com/img/ChromeWebStore_Badge_v2_340x96.png"}))))}});t.exports=s},function(t,e,n){"use strict";var i=n(1),r=n(2),a=(i.createClass({displayName:"StoryImage",render:function(){return i.createElement("img",{width:"100%",height:"100%",src:this.props.src})}}),i.createClass({displayName:"PoweredByMessage",handleLogoOnClick:function(){Parse.Analytics.track("LogoClick",{device:"Iframe"})},render:function(){var t={position:"fixed",top:"0px",left:"0px",background:"rgba(0, 0, 0, 0.4)",padding:"4px"};return i.createElement("div",{style:t},i.createElement("a",{onClick:this.handleLogoOnClick,href:"http://getsamosa.com",target:"_blank"},i.createElement("img",{style:{"float":"left",marginRight:"4px"},width:"24px",height:"24px",src:"https://lh5.ggpht.com/oJpCSXfyxWeLDSM8GKN-SHyv8ZK29pF2NURecNkK1aQD_9mH0ZYscux07oNPgxog28RU=w300"}),i.createElement("div",{style:{"float":"left",color:"white",marginTop:"4px",whiteSpace:"nowrap"}},"Powered by Samosa!")))}}));t.exports=i.createClass({displayName:"module.exports",getInitialState:function(){return Parse.Analytics.track("IframeEmbeds",{device:"Iframe"}),document.getElementById("left-side-bar").style.display="None",document.getElementById("header").style.display="None",{voice:[]}},componentDidMount:function(){this.search_by_key()},search_by_key:function(){var t=this;gapi.client.samosa.api.get_expression_by_key({id:this.props.params.key}).execute(function(e){t.setState({voice:e})})},render:function(){var t=this.state.voice.poster_url,e={position:"absolute",top:"0px",bottom:"0px",display:"block",width:"100%",backgroundImage:"url("+t+")",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},n=512,o=512;return"undefined"!=typeof window&&(n=window.innerWidth,o=window.innerHeight),console.log(o),console.log(n),i.createElement("div",null,i.createElement("div",{style:e},i.createElement(r,{frameWidth:n,frameHeight:o,controlSize:10,fontSize:9,opusURL:this.state.voice.opus_url,mp3URL:this.state.voice.mp3_url}),i.createElement(a,null)))}})},function(t,e,n){(function(e){"use strict";function i(t,e){if("function"==typeof t)return i("*",t);if("function"==typeof e)for(var n=new s(t),r=1;r<arguments.length;++r)i.callbacks.push(n.middleware(arguments[r]));else"string"==typeof t?i["string"==typeof e?"redirect":"show"](t,e):i.start(t)}function r(t){if(!t.handled){var e;e=w?v+m.hash.replace("#!",""):m.pathname+m.search,e!==t.canonicalPath&&(i.stop(),t.handled=!1,m.href=t.canonicalPath)}}function a(t){return"string"!=typeof t?t:y?decodeURIComponent(t.replace(/\+/g," ")):t}function o(t,e){"/"===t[0]&&0!==t.indexOf(v)&&(t=v+(w?"#!":"")+t);var n=t.indexOf("?");if(this.canonicalPath=t,this.path=t.replace(v,"")||"/",w&&(this.path=this.path.replace("#!","")||"/"),this.title=document.title,this.state=e||{},this.state.path=t,this.querystring=~n?a(t.slice(n+1)):"",this.pathname=a(~n?t.slice(0,n):t),this.params={},this.hash="",!w){if(!~this.path.indexOf("#"))return;var i=this.path.split("#");this.path=i[0],this.hash=a(i[1])||"",this.querystring=this.querystring.split("#")[0]}}function s(t,e){e=e||{},this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=h(this.path,this.keys=[],e.sensitive,e.strict)}function c(t){if(1===p(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var n=t.target;n&&"A"!==n.nodeName;)n=n.parentNode;if(n&&"A"===n.nodeName&&!n.hasAttribute("download")&&"external"!==n.getAttribute("rel")){var r=n.getAttribute("href");if((w||n.pathname!==m.pathname||!n.hash&&"#"!==r)&&!(r&&r.indexOf("mailto:")>-1)&&!n.target&&l(n.href)){var a=n.pathname+n.search+(n.hash||"");"undefined"!=typeof e&&a.match(/^\/[a-zA-Z]:\//)&&(a=a.replace(/^\/[a-zA-Z]:\//,"/"));var o=a;0===a.indexOf(v)&&(a=a.substr(v.length)),w&&(a=a.replace("#!","")),v&&o===a||(t.preventDefault(),i.show(o))}}}}function p(t){return t=t||window.event,null===t.which?t.button:t.which}function l(t){var e=m.protocol+"//"+m.hostname;return m.port&&(e+=":"+m.port),t&&0===t.indexOf(e)}var h=n(5);t.exports=i;var u,d,f="undefined"!=typeof document&&document.ontouchstart?"touchstart":"click",m="undefined"!=typeof window&&(window.history.location||window.location),g=!0,y=!0,v="",w=!1;i.callbacks=[],i.exits=[],i.current="",i.len=0,i.base=function(t){return 0===arguments.length?v:void(v=t)},i.start=function(t){if(t=t||{},!u&&(u=!0,!1===t.dispatch&&(g=!1),!1===t.decodeURLComponents&&(y=!1),!1!==t.popstate&&window.addEventListener("popstate",x,!1),!1!==t.click&&document.addEventListener(f,c,!1),!0===t.hashbang&&(w=!0),g)){var e=w&&~m.hash.indexOf("#!")?m.hash.substr(2)+m.search:m.pathname+m.search+m.hash;i.replace(e,null,!0,g)}},i.stop=function(){u&&(i.current="",i.len=0,u=!1,document.removeEventListener(f,c,!1),window.removeEventListener("popstate",x,!1))},i.show=function(t,e,n,r){var a=new o(t,e);return i.current=a.path,!1!==n&&i.dispatch(a),!1!==a.handled&&!1!==r&&a.pushState(),a},i.back=function(t,e){i.len>0?(history.back(),i.len--):t?setTimeout(function(){i.show(t,e)}):setTimeout(function(){i.show(v,e)})},i.redirect=function(t,e){"string"==typeof t&&"string"==typeof e&&i(t,function(t){setTimeout(function(){i.replace(e)},0)}),"string"==typeof t&&"undefined"==typeof e&&setTimeout(function(){i.replace(t)},0)},i.replace=function(t,e,n,r){var a=new o(t,e);return i.current=a.path,a.init=n,a.save(),!1!==r&&i.dispatch(a),a},i.dispatch=function(t){function e(){var t=i.exits[s++];return t?void t(a,e):n()}function n(){var e=i.callbacks[o++];return t.path!==i.current?void(t.handled=!1):e?void e(t,n):r(t)}var a=d,o=0,s=0;d=t,a?e():n()},i.exit=function(t,e){if("function"==typeof t)return i.exit("*",t);for(var n=new s(t),r=1;r<arguments.length;++r)i.exits.push(n.middleware(arguments[r]))},i.Context=o,o.prototype.pushState=function(){i.len++,history.pushState(this.state,this.title,w&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},o.prototype.save=function(){history.replaceState(this.state,this.title,w&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},i.Route=s,s.prototype.middleware=function(t){var e=this;return function(n,i){return e.match(n.path,n.params)?t(n,i):void i()}},s.prototype.match=function(t,e){var n=this.keys,i=t.indexOf("?"),r=~i?t.slice(0,i):t,o=this.regexp.exec(decodeURIComponent(r));if(!o)return!1;for(var s=1,c=o.length;c>s;++s){var p=n[s-1],l=a(o[s]);void 0===l&&hasOwnProperty.call(e,p.name)||(e[p.name]=l)}return!0};var x=function(){var t=!1;if("undefined"!=typeof window)return"complete"===document.readyState?t=!0:window.addEventListener("load",function(){setTimeout(function(){t=!0},0)}),function(e){if(t)if(e.state){var n=e.state.path;i.replace(n,e.state)}else i.show(m.pathname+m.hash,void 0,void 0,!1)}}();i.sameOrigin=l}).call(e,n(7))},function(t,e,n){function i(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function r(t,e){return t.keys=e,t}function a(t){return t.sensitive?"":"i"}function o(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)e.push({name:i,delimiter:null,optional:!1,repeat:!1});return r(t,e)}function s(t,e,n){for(var i=[],o=0;o<t.length;o++)i.push(p(t[o],e,n).source);var s=new RegExp("(?:"+i.join("|")+")",a(n));return r(s,e)}function c(t,e){function n(t,n,a,o,s,c,p,l){if(n)return n;if(l)return"\\"+l;var h="+"===p||"*"===p,u="?"===p||"*"===p;return e.push({name:o||r++,delimiter:a||"/",optional:u,repeat:h}),a=a?"\\"+a:"",s=i(s||c||"[^"+(a||"\\/")+"]+?"),h&&(s=s+"(?:"+a+s+")*"),u?"(?:"+a+"("+s+"))?":a+"("+s+")"}var r=0;return t.replace(h,n)}function p(t,e,n){if(e=e||[],l(e)?n||(n={}):(n=e,e=[]),t instanceof RegExp)return o(t,e,n);if(l(t))return s(t,e,n);var i=n.strict,p=n.end!==!1,h=c(t,e),u="/"===t.charAt(t.length-1);return i||(h=(u?h.slice(0,-2):h)+"(?:\\/(?=$))?"),h+=p?"$":i&&u?"":"(?=\\/|$)",r(new RegExp("^"+h,a(n)),e)}var l=n(6);t.exports=p;var h=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g")},function(t,e,n){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){function i(){if(!s){s=!0;for(var t,e=o.length;e;){t=o,o=[];for(var n=-1;++n<e;)t[n]();e=o.length}s=!1}}function r(){}var a=t.exports={},o=[],s=!1;a.nextTick=function(t){o.push(t),s||setTimeout(i,0)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=r,a.addListener=r,a.once=r,a.off=r,a.removeListener=r,a.removeAllListeners=r,a.emit=r,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}}]);